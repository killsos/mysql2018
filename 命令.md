## MySql


1. 登录数据库
	
	mysql -u root -p password -h 以root用户身份登录数据库
	
	-u 用户名
	
	-p 密码
	
	-h 主机host
	
	默认端口 3306
	

## 数据库命令

1. 显示当前数据库服务器中的数据库列表

	show databases;
	

2. 选择数据库
	
	use 库名;

3. 创建数据库
	
	create database 库名 [charset 字符集];
	
	create database Tea123 charset utf8;

4. 删除数据库
	
	drop database 库名;
	
5. 不能修改数据库名 但是可以修改表名 和 列名

	

## 表命令

1. 显示表
	
	show tables;
	
2. 创建表
	
	create table 表名(字段名 VARCHAR(20), 字段名 CHAR(1)...)[engine = myisam] [charset = utf8];
	
	create table 表名(列1 [列属性 默认值],列2 [列属性 默认值]...列n [列属性 默认值]) engine = 存储引擎 charset = 字符集;
	
	create table 表名(列1 [列参数] [not null default ],列2 [列参数] [not null default ]...列n [[列参数] [not null default ]) engine = 存储引擎 charset = 字符集;
	
	存储引擎: myisam innodb 
	
	charset: utf8 gbk
	
	primary key
	
	auto_increment
	
	NULL类型:
		
		NULL不是假 也不是真  而是空
		
		任何运算符 判断符碰到NULL 都得到NULL
		
		NULL的判断只能用:is NULL is not NULL
		
		NULL音响查询速度  一般避免使值 为 NULL
		


3. 删除
	
	drop table 表名;

4. 修改表名

	rename table 旧表名 to 新表名;

5. 查询
	
	select
	
		- where  条件
		
			select 列名  from 表名 where 列名 > 条件值
			
		查询模型:
			
			where 后面判断表达式 为真 才取相应的记录
			
			相当于遍历每一行记录 然后表达式的值 决定是否选中此行
		
			每个列名可以看作是一个变量  变量之间运算称为 广义投影
			
			where发挥作用时候 表上并没有as定义列名
			
			只有在结果集中as定义列名才发挥作用
			
			对于结果中的列 如果再想筛选 须用having
			
			update mian set num=floor(num<10)*10 where num>20 and num<39;
			
		
		- group by  分类
			
			严格的讲 以 group by a, b, c为列 则select的列 只能在 a, b, c里选择 语义上才没有矛盾
		
		- having
		
			一个典型列子
			
			select name, avg(score), sum(score < 60) as gks from studentTable group by name having gks >=2;
		
		- order by  排序
		
		- limit  分页
		
		
	
	
	

6. 显示表的结构  查看表的字段

	desc 表名;
	
	describe 表名;

7. 清除表中的记录
	
	delete from 表名;
	
	truncate 表名;
	
	truncate 与 delete的区别:  
	
	- truncate 相当于删表再重建一个张同样结构的表 操作后得到一张全新表
	
	- delete 是从删除所有行的层面来操作的 如果有自增性的列会有影响
	
	- 从速度上来讲 truncate 更快

8. 显示表的记录

	select * from 表名;
	
9. 添加记录
	
	insert into 表名(字段名, 字段名,...) values (字段值, 字段值,...);
	
	insert into 表名 values (字段值, 字段值,...); // 插入所有列
	
	insert into 表名(字段名, 字段名,...) values (字段值1, 字段值1,...), (字段值2, 字段值2,...); // 插入多行
	
		primary   	主键
		
		not null     不能为null
		
		defeault 内容  默认值是什么
		
		auto_increment  自增
	
10. 更新记录
	
	update 表名 set 字段名1=字段值1, 字段名2=字段值2 where 表达式(字段名=字段值);
	
	AND OR 
	
	update test set name='killsos', age=18 where sex=1;
	
11. 删除记录

	delete from 表名 where 表达式;
	
	
12.	查询记录
	
	selete  字段名1, 字段名2,.. from 表名 where 表达式;
	
	selete * from 表名; 所有行 所有列
	
13. 列类型
	
	
		MySQL 三大列类型
		
			1. 数值型
				
				整形
					
					Tinyint
						
						字节: 1
						
						范围: -128 - 127 ; 0 - 255
					
					Smallint
					
						
						字节: 2
						
						范围: -32768 - 32767 ; 0 - 65535
					
					Mediuint
					
						字节: 3
						
					Int
					
						字节: 4
					
					Bigint
						
						字节: 8
						
		  			整型系列声明时参数:
						
						整型如果加下列参数 默认是有符号的
					
						unsigned	无符号
							
							例如 int unsigned
						
						zerofill    零填充  填充的时候默认是 unsigned类型
						
							例如  int(5) zerofill
								
								值为1 开始补位 并且宽度是5 用零来填充 所以真实存储是 00001
								
						
						(M) 宽度  这里的M必须与zerofill配合使用才有意义
							
							例如 int(1)
						
						
		  	  	浮点型  IEEE754浮点数格式
					
					M 叫 精度  代表总位数
					
					D 叫 标度  代表小数位  小数点右边的位数
				
					Float(M,D)
						
						float 能存储 10^38 ~ 10^-38
						
						如果M<=24 占用 4 个字节  否则 占用 8 个字节
						
						与float浮点数 相对于的是 定点数 decimal 定点数是把整数部分 与 小数不封 分开存储
						
						decimal 比 float 精确, float会算是精度
					
					decimal(M,D)
					
			2. 字符型
				
				char   定长  char(M)
					
					char(6)
					
						查找行记录的时候 如果都是定长
						
						完全可以通过行数与行的长度计算出来  所以查找速度快
						
						如果不够长度在末尾用空格补齐然后存储数据 取出的时候删除右侧的空格
							
							但是这里有一个副作用 如果本身最后就是一个空格 会被误删除
				
				varchar  变长
					
					varchar(6)
					
						对于varchar(M) 不用空格补齐 但列内容前 有1-2个字节记录该列的长度  所以速度慢
						
				char(M) varchar(M)限制的是字符 不是字节
				
					char(2) 如果 charset 是 utf8  能存 2 个utf8字符
					
					
				text  文本类型
				
					text不用加默认值 加了也没有作用
					
					用来存储文章内容 新闻
					
				blob  二进制
				
					用来存储图像 音频信息
					
					意义: 二进制  0- 255 都有可能出现
					
					防止因为字符集的问题 导致信息丢失
		
		3. 日期 时间类型
			
			date  日期  3个字节
			
				标准格式  YYYY-MM-DD
				
				范围  1000-01-01   9999-12-31
				
			time  时间  3个字节
				
				标准格式  HH:MM:SS
				
				范围     -838:59:59  838:59:59
			
			datetime   日期时间   8个字节
			
				标准格式  YYYY-MM-DD HH:MM:SS
			
			year 年份类型  1个字节
				
				标准格式 YYYY  YY(不推荐)
				
				范围  1901-2155
			
			timestamp 时间戳
					
					CURRENT_TIMESTAMP 当前时间戳 修饰timestamp类型的默认值
					
	

14. 修改表
	
	增加列
	
	alter table 表名 add 列名称 列参数 列声明;
	
	alter table 表名 add 列名称2 列参数 列声明 after 列名称1; // 指定新添加的列2在列1之后
	
	alter table 表名 add 列名称2 列参数 列声明 first; // 指定新添加的列在第一列;
	
	删除列
	
	alert table 表名 drop 列名;
	
	修改列名与列类型
	
	alert table 表名 change 旧列名称 新列名称 [新的列参数 新的列声明];
	
	修改列类型
	
	alert table 表名 modify 列名称 新的列参数 新的列声明;
	

15.	常用运算符

	比较运算符:
	
	小于		<
	
	小于等于   <=
	
	大于    >
	
	大于等于   >=
	
	等于       ==
	
	不等于     != <>
	
	在某集合内   in  in(值1, 值2,...)
	
	在某范围内   between  包括边界值
	
		between  100 and 500 ===>  x >= 100   x <= 500
	
	逻辑运算符:
	
	逻辑非              NOT !
	
	逻辑与              AND  &&
	
	逻辑或              OR   ||
	
	模糊查询    like  _ 下划线 通配 单个字符  % 通配 任意个字符

16. 常用函数

	max()    求最大
	
	min()    求最小
	
	sum()    求和
	
	avg()    求平均值
	
	count()  求总行数
	
		select count(*) from 表名 查询的就是绝对的行数 哪怕某一行所有字段全为null 也计算在内
		
		select count(列名) from 表名 查询为该列不为null的所有行的行数
		
		用count(*) count(1) 谁好？
		
		其实对于myisam引擎的表 没有区别的
		
		这种引擎内部一计数器在维护着行数 所以立刻就取出该值
		
		而innodb的用count(*)直接读行数 效率很低 因为innodb真的要去数一遍
		
	

	
	
	
	
	
	
	